<?xml version="1.0" encoding="UTF-8"?>
<?template version="1.51-Oxygen" service="//Security//" type="security-iam" origin="Oxygen" value="csctemplate-awsdocs-SecurityIAM-1.51-oxygen"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "file://zonbook/docbookx.dtd"[

<!ENTITY % xinclude SYSTEM "file://AWSShared/common/xinclude.mod">              %xinclude;
<!-- Add this line back and update it to point to your local shared entity file
<!ENTITY % phrases-local  SYSTEM  "../shared/phrases-local.ent">                       %phrases-local;
-->
<!ENTITY % phrases-shared SYSTEM "file://AWSShared/common/phrases-shared.ent">         %phrases-shared;  


<!ENTITY SERVICElong '&AWS; Awesome'>
<!ENTITY SERVICE 'Awesome'>
<!ENTITY SERVICEPREFIX 'awes'>

<!-- TO DO - REPLACE your_service after &url-sazr-ref; with the correct link for your service. For example, &url-sazr-ref;list_awsactivate.html#awsactivate-policy-keys -->
<!ENTITY SERVICE-LIST-URL '<ulink url="&url-sazr-ref;list_your_service.html">Actions, resources, and condition keys for &SERVICElong;</ulink>'>
<!ENTITY SERVICE-ACTIONS-URL '<ulink url="&url-sazr-ref;list_your_service.html#your_service-actions-as-permissions">Actions defined by &SERVICElong;</ulink>'>
<!ENTITY SERVICE-RESOURCES-URL '<ulink url="&url-sazr-ref;list_your_service.html#your_service-resources-for-iam-policies">Resources defined by &SERVICElong;</ulink>'>
<!ENTITY SERVICE-CONDITIONS-URL '<ulink url="&url-sazr-ref;list_your_service.html#your_service-policy-keys">Condition keys for &SERVICElong;</ulink>'>

<!-- Do not update these entities - keeping them in the template for backwards compatibility -->
<!ENTITY AA-SERVICENAMElong '&SERVICElong;'>
<!ENTITY AA-SERVICENAME '&SERVICE;'>
<!ENTITY AA-SERVICEPREFIX '&SERVICEPREFIX;'>
<!ENTITY AA-SERVICE-LIST-URL '&SERVICE-LIST-URL;'>
<!ENTITY AA-SERVICE-RESOURCES-URL '&SERVICE-ACTIONS-URL;'>
<!ENTITY AA-SERVICE-ACTIONS-URL '&SERVICE-RESOURCES-URL;'>
<!ENTITY AA-SERVICE-CONDITIONS-URL '&SERVICE-CONDITIONS-URL;'>

<!-- IAM feature support -->
<!-- TO DO - Use these colored IAM yes/partial/no entities to indicate the level of support for the features in the support entities below:
     &sec-iam-green-yes;
     &sec-iam-yellow-partial;
     &sec-iam-red-no;
-->
<!ENTITY sec-iam-support-identity-based-policies '&sec-iam-green-yes;'>
<!ENTITY sec-iam-support-resource-based-policies '&sec-iam-red-no;'>
<!ENTITY sec-iam-support-policy-actions '&sec-iam-green-yes;'>
<!ENTITY sec-iam-support-policy-resources '&sec-iam-green-yes;'>
<!ENTITY sec-iam-support-policy-condition-keys '&sec-iam-green-yes;'>
<!ENTITY sec-iam-support-acls '&sec-iam-red-no;'>
<!ENTITY sec-iam-support-abac '&sec-iam-yellow-partial;'>
<!ENTITY sec-iam-support-temp-creds '&sec-iam-green-yes;'>
<!ENTITY sec-iam-support-principal-permissions '&sec-iam-green-yes;'>
<!ENTITY sec-iam-support-service-roles '&sec-iam-green-yes;'>
<!ENTITY sec-iam-support-service-linked-roles '&sec-iam-red-no;'>

]>
<section role="topic" id="security-iam">
   <info>
      <title id="security-iam.title">Identity and Access Management for &SERVICElong;</title>
      <titleabbrev>Identity and Access Management</titleabbrev>
      <abstract>
         <para>How to authenticate requests and manage access to your &SERVICE; resources.</para>
      </abstract>
   </info>
   <para><remark><emphasis role="bold">TODO:</emphasis> Before you begin using this template, send the
      questions from the wiki to your service team. Use their answers to fill in the entities at the
      top of this file. Then move the entities to your local entities.</remark></para>
   <para><remark><emphasis role="bold">IMPORTANT:</emphasis> If you leave the entities in this file, 
      the text will not be localized. You can leave these "remark" tags in place if you like. They do not 
      appear in the output.</remark></para>
   <!-- 
      
-->
   <remark><emphasis role="bold">UPGRADES:</emphasis> This template is ready for MINIMUM doc delivery. Do a search for (all-caps) 
      "RECOMMENDED" or "GOLD STANDARD" to find inline suggestions, hints, or example text that you can use to upgrade your docs. 
      For more info about minimum, recommended, and gold standard doc requirements, see 
      https://w.amazon.com/bin/view/AWSDocs/service-launch/#HDocteamdeliverables28bylevel29.</remark>
   <!-- 
      
-->
   <remark><emphasis role="bold">HELP:</emphasis> For detailed instructions or help, see the wiki:
      https://w.amazon.com/bin/view/AWSDocs/testing-and-publishing/add-cross-service-content/IAM/auth-access-control</remark>
   <!-- 
      
-->
   <remark><emphasis role="bold">ENTITIES:</emphasis> The entities used in this template are labeled
      "DO NOT USE" to warn against non-template use. You can ignore "DO NOT USE" in this
      template.</remark> 
   &sec-iam-template-intro; 
   <para role="topiclist"/>
   &sec-iam-template-iam-about;
   <section id="security_iam_service-with-iam" role="topic">
      <info>
         <title id="security_iam_service-with-iam.title">How &SERVICElong; works with &IAM;</title>
      </info>
      &sec-iam-template-works-with-intro;      
      <para><remark><emphasis role="bold">RECOMMENDED:</emphasis> If your doc set includes multiple services, you can manually update this table. 
         For MINIMUM docs for a single service, don't edit it.</remark></para>
         <para><remark><emphasis role="bold">NOTE:</emphasis> The values in this table come from the shared entities, and the same info is used later 
            on this page. If something changes, update the entity in your shared entity file.</remark></para>
      <table>
         <title>&IAM; features you can use with &SERVICElong;</title>
         <tgroup cols="2">
            <colspec colnum="1" colname="col1" colwidth="1*"/>
            <colspec colnum="2" colname="col2" colwidth="1*"/>
            <thead>
               <row>
                  <entry>&IAM; feature</entry>
                  <entry>&SERVICE; support</entry>
               </row>
            </thead>
            <tbody>
               <row>
                  <entry>
                     <para><link linkend="security_iam_service-with-iam-id-based-policies"
                           >Identity-based policies</link></para>
                  </entry>
                  <entry>
                     <para>&sec-iam-support-identity-based-policies;</para>
                  </entry>
               </row>
               <row>
                  <entry>
                     <para><link linkend="security_iam_service-with-iam-resource-based-policies"
                           >Resource-based policies</link></para>
                  </entry>
                  <entry>
                     <para>&sec-iam-support-resource-based-policies;</para>
                  </entry>
               </row>
               <row>
                  <entry>
                     <para><link linkend="security_iam_service-with-iam-id-based-policies-actions"
                           >Policy actions</link></para>
                  </entry>
                  <entry>
                     <para>&sec-iam-support-policy-actions;</para>
                  </entry>
               </row>
               <row>
                  <entry>
                     <para><link linkend="security_iam_service-with-iam-id-based-policies-resources"
                           >Policy resources</link></para>
                  </entry>
                  <entry>
                     <para>&sec-iam-support-policy-resources;</para>
                  </entry>
               </row>
               <row>
                  <entry>
                     <para><link
                           linkend="security_iam_service-with-iam-id-based-policies-conditionkeys"
                        >Policy condition keys (service-specific)</link></para>
                  </entry>
                  <entry>
                     <para>&sec-iam-support-policy-condition-keys;</para>
                  </entry>
               </row>
               <row>
                  <entry>
                     <para><link linkend="security_iam_service-with-iam-acls">ACLs</link></para>
                  </entry>
                  <entry>
                     <para>&sec-iam-support-acls;</para>
                  </entry>
               </row>
               <row>
                  <entry>
                     <para><link linkend="security_iam_service-with-iam-tags">ABAC (tags in
                           policies)</link></para>
                  </entry>
                  <entry>
                     <para>&sec-iam-support-abac;</para>
                  </entry>
               </row>
               <row>
                  <entry>
                     <para><link linkend="security_iam_service-with-iam-roles-tempcreds">Temporary
                           credentials</link></para>
                  </entry>
                  <entry>
                     <para>&sec-iam-support-temp-creds;</para>
                  </entry>
               </row>
               <row>
                  <entry>
                     <para><link linkend="security_iam_service-with-iam-principal-permissions"
                           >Principal permissions</link></para>
                  </entry>
                  <entry>
                     <para>&sec-iam-support-principal-permissions;</para>
                  </entry>
               </row>
               <row>
                  <entry>
                     <para><link linkend="security_iam_service-with-iam-roles-service">Service
                           roles</link></para>
                  </entry>
                  <entry>
                     <para>&sec-iam-support-service-roles;</para>
                  </entry>
               </row>
               <row>
                  <entry>
                     <para><link linkend="security_iam_service-with-iam-roles-service-linked"
                           >Service-linked roles</link></para>
                  </entry>
                  <entry>
                     <para>&sec-iam-support-service-linked-roles;</para>
                  </entry>
               </row>
            </tbody>
         </tgroup>
      </table>
      <para>To get a high-level view of how &SERVICE; and other &AWS; services work with most &IAM;
         features, see <ulink url="&url-iam-user;reference_aws-services-that-work-with-iam.html"
            >&AWS; services that work with &IAM;</ulink> in the
            <emphasis>&guide-iam-user;</emphasis>.</para>

      <section id="security_iam_service-with-iam-id-based-policies">
         <info>
            <title id="security_iam_service-with-iam-id-based-policies.title">Identity-based
               policies for &SERVICE;</title>
            <titleabbrev>Identity-based policies</titleabbrev>
         </info> &sec-iam-feature-support-table-id-based-policies;
         &sec-iam-template-access-id-based-policies-details; 
         <section
            id="security_iam_service-with-iam-id-based-policies-examples">
            <info>
               <title id="security_iam_service-with-iam-id-based-policies-examples.title">
                  Identity-based policy examples for &SERVICE;</title>
            </info>
            <para><remark><emphasis role="bold">DO NOT ADD EXAMPLES HERE.</emphasis> This is a link
                  to the examples page. Having a separate page for examples makes it easier for
                  customers to find them.</remark></para>
            &sec-iam-template-id-based-policies-example-link; 
         </section>
      </section>
      <section id="security_iam_service-with-iam-resource-based-policies">
         <info>
            <title id="security_iam_service-with-iam-resource-based-policies.title">Resource-based
               policies within &SERVICE;</title>
            <titleabbrev>Resource-based policies</titleabbrev>
         </info>
         &sec-iam-feature-support-table-resource-based-policies;
         &sec-iam-template-access-resource-based-policies-details;
         
         <remark><emphasis role="bold">RECOMMENDED</emphasis> If your service supports resource-based policies (not common), 
            then uncomment and use the text and section below  and replace the ALL-CAPS text with service-specific info.</remark> 
         <!--  
         <para>The &SERVICE; service supports only one type of resource-based policy called a <emphasis
               role="italic">SAMPLE-RESOURCE policy</emphasis>, which is attached
            to a SAMPLE-RESOURCE. This policy defines which principals can perform actions on the
               SAMPLE-RESOURCE.</para>
         <para>To learn how to attach a resource-based policy to a
            SAMPLE-RESOURCE, see <emphasis role="bold">ADD-XREF-TO-YOUR-DOC-PROCEDURE-HERE</emphasis>.</para>
         <section id="security_iam_service-with-iam-resource-based-policies-examples">
            <info>
               <title id="security_iam_service-with-iam-resource-based-policies-examples.title"
                  >Resource-based policy examples within &SERVICE;</title>
            </info>
            <para><remark><emphasis role="bold">DO NOT ADD EXAMPLES HERE.</emphasis> This is a link
                  to the examples page. Having a separate page for examples makes it easier for
                  customers to find and to review. Keep this comment because if your service adds this feature in
                  the future, it's easier to add the content.</remark></para>
            <para>To view examples of &SERVICE; resource-based policies, see <xref
                  linkend="security_iam_resource-based-policy-examples"
                  endterm="security_iam_resource-based-policy-examples.title"/>,</para>
         </section>         
            -->
      </section>
      <section id="security_iam_service-with-iam-id-based-policies-actions">
         <info>
            <title id="security_iam_service-with-iam-id-based-policies-actions.title">Policy actions
               for &SERVICE;</title>
            <titleabbrev>Policy actions</titleabbrev>
         </info> &sec-iam-feature-support-table-actions; &sec-iam-template-policies-actions;
               <para><remark><emphasis role="bold">NOTE:</emphasis> Don't remove this link to the
               SDF-generated docs. We don't recommend manually including a list of the actions
               available for your service because it's hard to maintain.</remark></para>
         <para>To see a list of &SERVICE; actions, see &SERVICE-ACTIONS-URL; in the
               <emphasis>&guide-sazr-ref;</emphasis>.</para>
         <para>Policy actions in &SERVICE; use the following prefix before the action:</para>
         <programlisting>&SERVICEPREFIX;</programlisting>
         <para>To specify multiple actions in a single statement, separate them with commas.</para>
         <programlisting>"Action": [
      "&SERVICEPREFIX;:<replaceable>action1</replaceable>",
      "&SERVICEPREFIX;:<replaceable>action2</replaceable>"
         ]</programlisting>
         <para><remark><emphasis role="bold">RECOMMENDED:</emphasis> Uncomment the text below and
               update the actions using an example for your service from one of the following list:
               Describe*, List*, or Get*, depending on what your service supports.</remark></para>
            <para><remark><emphasis role="bold">NOTE:</emphasis> Do NOT tell customers to use
               wildcards to specify all of the actions for a service. Use the best practice of
               granting least privilege and narrow the permissions used in a policy.</remark></para>
         <!-- 
         <para>You can specify multiple actions using wildcards (*). For example, to specify all
            actions that begin with the word <code>Describe</code>, include the following
            action:</para>
         <programlisting>"Action": "&SERVICEPREFIX;:Describe*"</programlisting>
         -->
         <remark><emphasis role="bold">NOTE:</emphasis> If you add resource-related examples in the next section, 
            you can link there and comment out the example link below.</remark>
         &sec-iam-template-id-based-policies-example-link; 
         <remark><emphasis role="bold">GOLD STANDARD</emphasis>: Help customers understand how to
         use your actions. Provide additional details, especially if any of your actions behave
         abnormally. For example, some actions have additional action dependencies.</remark>
      </section>
      <section id="security_iam_service-with-iam-id-based-policies-resources">
         <info>
            <title id="security_iam_service-with-iam-id-based-policies-resources.title">Policy
               resources for &SERVICE;</title>
            <titleabbrev>Policy resources</titleabbrev>
         </info> 
         &sec-iam-feature-support-table-resources; 
         &sec-iam-template-policies-resources;
         <para>To see a list of &SERVICE; resource types and their ARNs, see
            &SERVICE-RESOURCES-URL; in the <emphasis>&guide-sazr-ref;</emphasis>. To learn with
            which actions you can specify the ARN of each resource, see
            &SERVICE-ACTIONS-URL;.</para>
        <para><remark><emphasis role="bold">RECOMMENDED</emphasis>: If your service supports
               nonstandard resource requirements, uncomment and use the example below to create an
               example for your service.</remark></para>
            <para><remark><emphasis role="bold">NOTE:</emphasis> Do NOT tell customers to use
               wildcards to specify all of the resources for a service,unless it's necessary (as
               described above). Use the best practice of granting least privilege and reduce the
               permissions used in a policy.</remark></para>
    <!-- 
         <para>Some &SERVICE; API actions support multiple resources. For example,
               <code>EXAMPLE-ACTION</code> accesses EXAMPLE-RESOURCE-1 and EXAMPLE-RESOURCE-2, so a principal 
            must have permissions to access both resources. To specify multiple
            resources in a single statement, separate the ARNs with commas. </para>
         <programlisting>"Resource": [
      "<emphasis role="italic">EXAMPLE-RESOURCE-1</emphasis>",
      "<emphasis role="italic">EXAMPLE-RESOURCE-2</emphasis>"</programlisting>
      -->
         <remark><emphasis role="bold">NOTE:</emphasis> If you add resource-related examples in the next section, 
            you can link there and comment out the example link below.</remark>
         &sec-iam-template-id-based-policies-example-link; 
         
         <remark><emphasis role="bold">GOLD STANDARD</emphasis>: Help customers understand how to
            use your resources. Provide more information than the Actions, resources and condition keys page.</remark>
      </section>
      <section id="security_iam_service-with-iam-id-based-policies-conditionkeys">
         <info>
            <title id="security_iam_service-with-iam-id-based-policies-conditionkeys.title">Policy
               condition keys for &SERVICE;</title>
            <titleabbrev>Policy condition keys</titleabbrev>
         </info>
         &sec-iam-feature-support-table-condition-keys; 
         &sec-iam-template-policies-conditions;
         <para>To see a list of &SERVICE; condition keys, see &SERVICE-CONDITIONS-URL; in the
            <emphasis>&guide-sazr-ref;</emphasis>. To learn with which actions and resources you
            can use a condition key, see &SERVICE-ACTIONS-URL;.</para>
         
         <remark><emphasis role="bold">RECOMMENDED:</emphasis> If your service supports service-specific 
            condition keys, add additional information here. We also strongly recommend that you add example 
            identity-based policies in the security_iam_id-based-policy-examples section that use the keys. 
            Uncomment and update the following text and link to examples from here.</remark>
         <!-- 
         <para> All &EC2; actions support the <code>aws:RequestedRegion</code> and
               <code>ec2:Region</code> condition keys. For more information, see <ulink
               url="&url-ec2-user;ExamplePolicies_EC2.html#iam-example-region">Example: Restricting
               access to a specific region</ulink>. </para>    
         -->
         <remark><emphasis role="bold">NOTE:</emphasis> If you add condition-related examples in the next section, 
            you can link there and comment out the example link below.</remark>
         &sec-iam-template-id-based-policies-example-link; 
         
         <remark><emphasis role="bold">GOLD STANDARD</emphasis>: Help customers understand how to
            use your service's condition keys. Provide more information than the Actions, resources 
            and condition keys page.</remark>
      </section>
      <section id="security_iam_service-with-iam-acls">
         <info>
            <title id="security_iam_service-with-iam-acls.title">ACLs in &SERVICE;</title>
            <titleabbrev>ACLs</titleabbrev>
         </info>
         &sec-iam-feature-support-table-acls; 
         &sec-iam-template-acls;
         <remark><emphasis role="bold">RECOMMENDED:</emphasis> If your service supports ACLs, 
            add additional information here. You can uncomment and edit the example below.</remark> 
         <!-- 
         <para>Access control lists (ACLs) are lists of grantees that you can attach to resources.
            They grant accounts permissions to access the resource to which they are attached. You
            can attach ACLs to an &S3; <replaceable>bucket</replaceable> resource. For more
            information about attaching ACLs to <replaceable>buckets</replaceable>, see
                  <replaceable><emphasis role="bold">ADD XREF TO YOUR DOCS
               HERE</emphasis></replaceable>.</para>
         <para>With &S3; access control lists (ACLs), you can manage access to
               <replaceable>bucket</replaceable> resources. Each <replaceable>bucket</replaceable>
            has an ACL attached to it as a subresource. It defines which &AWS-accounts;, &IAM; users
            or groups of users, or &IAM; roles are granted access and the type of access. When a
            request is received for a resource, &AWS; checks the corresponding ACL to verify that
            the requester has the necessary access permissions.</para>
         <para>When you create a <replaceable>bucket</replaceable> resource, &S3; creates a default
            ACL that grants the resource owner full control over the resource. In the following
            example <replaceable>bucket</replaceable> ACL, John Doe is listed as the owner of the
               <replaceable>bucket</replaceable> and is granted full control over that
               <replaceable>bucket</replaceable>. An ACL can have up to 100 grantees.</para>
         <programlisting>&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;AccessControlPolicy xmlns="http://&SERVICEPREFIX;.amazonaws.com/doc/2006-03-01/">
  &lt;Owner>
    &lt;ID><replaceable>c1daexampleaaf850ea79cf0430f33d72579fd1611c97f7ded193374c0b163b6</replaceable>&lt;/ID>
    &lt;DisplayName><replaceable>john-doe</replaceable>&lt;/DisplayName>
  &lt;/Owner>
  &lt;AccessControlList>
    &lt;Grant>
      &lt;Grantee xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
               xsi:type="Canonical User">
        &lt;ID><replaceable>c1daexampleaaf850ea79cf0430f33d72579fd1611c97f7ded193374c0b163b6</replaceable>&lt;/ID>
        &lt;DisplayName><replaceable>john-doe</replaceable>&lt;/DisplayName>
      &lt;/Grantee>
      &lt;Permission>FULL_CONTROL&lt;/Permission>
    &lt;/Grant>
  &lt;/AccessControlList>
&lt;/AccessControlPolicy> </programlisting>
         <para>The ID field in the ACL is the &AWS-account; canonical user ID. To learn how to view
            this ID in an account that you own, see <ulink
               url="&url-aws-gen;acct-identifiers.html#FindingCanonicalId">Finding an &AWS-account;
               canonical user ID</ulink>. </para>
         -->
      </section>
      <section id="security_iam_service-with-iam-tags">
         <info>
            <title id="security_iam_service-with-iam-tags.title">ABAC with &SERVICE;</title>
            <titleabbrev>ABAC</titleabbrev>
         </info> 
         &sec-iam-feature-support-table-abac; 
         &sec-iam-template-abac;
         <remark><emphasis role="bold">RECOMMENDED:</emphasis> If your service supports ABAC, add additional
            information here. You can uncomment and edit the example below.</remark> 
         <!-- 
         <para>For more information about tagging &SERVICE;
            resources, see <xref
               linkend="ADD-XREF-TO-YOUR-TAGGING-A-RESOURCE-DOCS-HERE"
               endterm="ADD-XREF-TO-YOUR-TAGGING-A-RESOURCE-DOCS-HERE.title"/>.</para>
         <para>To view an example identity-based policy for limiting access to a resource based on
            the tags on that resource, see <xref
               linkend="ADD-XREF-TO-YOUR-EXAMPLE-TAG-POLIXY-DOCS-HERE"
               endterm="ADD-XREF-TO-YOUR-EXAMPLE-TAG-POLIXY-DOCS-HERE.title"/>.</para>
          -->
      </section>
      <!-- NOTE: Compared to the last version, we deleted the section:security_iam_service-with-iam-roles
         If you previously used this section, any customers that bookmarked it will be 
           directed to the top of this page. You don't need to make any changes. -->
      <section id="security_iam_service-with-iam-roles-tempcreds">
         <info>
            <title id="security_iam_service-with-iam-roles-tempcreds.title">Using temporary
               credentials with &SERVICE;</title>
            <titleabbrev>Temporary credentials</titleabbrev>
         </info> 
         &sec-iam-feature-support-table-temp-creds; 
         &sec-iam-template-temp-creds; 
      </section>
      <section id="security_iam_service-with-iam-principal-permissions">
         <info>
            <title id="security_iam_service-with-iam-principal-permissions.title">Cross-service
               principal permissions for &SERVICE;</title>
            <titleabbrev>Principal permissions</titleabbrev>
         </info> 
         &sec-iam-feature-support-table-principal-permissions;
         &sec-iam-template-principal-permissions; 
      </section>
      <section id="security_iam_service-with-iam-roles-service">
         <info>
            <title id="security_iam_service-with-iam-roles-service.title">Service roles for
               &SERVICE;</title>
            <titleabbrev>Service roles</titleabbrev>
         </info> 
         &sec-iam-feature-support-table-service-roles; 
         &sec-iam-template-service-roles;
         <remark><emphasis role="bold">NOTE:</emphasis> If you choose to remove the text below,
         make sure that you still warn customers about changing their own service roles without
         guidance.</remark> 
         <warning>
            <para>Changing the permissions for a service role might break &SERVICE; functionality.
               Edit service roles only when &SERVICE; provides guidance to do so.</para>
         </warning>
         <remark><emphasis role="bold">RECOMMENDED:</emphasis> If your service supports service roles, 
            add additional information to this section. You can link to details that you have in your 
            procedures, or add that information here. Let customers use this as a single source for links.
            You can also uncomment and edit the example below.</remark> 
         <!-- 
         <section id="security_iam_service-with-iam-roles-choose">
            <info>
               <title id="security_iam_service-with-iam-roles-choose.title">Choosing an &IAM; role
                  in &SERVICE;</title>
            </info>
            <remark><emphasis role="bold">EXAMPLE SCENARIO - not common .</emphasis><remark> Many
                  services have workflows that require customers to choose an &IAM; role from a
                  list, or specify the name of an existing role. Help the customer understand when
                  and why that happens. I<emphasis role="bold">If your service does not support
                     this</emphasis></remark>, delete this section. Newer services use
               service-linked roles instead.</remark>
            <para>When you create a <replaceable>widget</replaceable> resource in &SERVICE;, you
               must choose a role to allow &SERVICE; to access &EC2; on your behalf. If you have
               previously created a service role or service-linked role, then &SERVICE; provides you
               with a list of roles to choose from. It's important to choose a role that allows
               access to start and stop &EC2; instances. For more information, see
                     <replaceable><emphasis role="bold">ADD XREF TO YOUR DOCS
                  HERE</emphasis></replaceable>.</para>
         </section>
         -->
      </section>
      <section id="security_iam_service-with-iam-roles-service-linked">
         <info>
            <title id="security_iam_service-with-iam-roles-service-linked.title">Service-linked
               roles for &SERVICE;</title>
            <titleabbrev>Service-linked roles</titleabbrev>
         </info>
         &sec-iam-feature-support-table-service-linked-roles;
         &sec-iam-template-service-linked-roles;
         <remark><emphasis role="bold">RECOMMENDED:</emphasis> If your service supports
            service-linked roles, add the link to your SLR pages or landing page. Uncomment and edit
            the example below and then comment out the paragraph after it. The existing para is a
            roundabout path to find your docs, if they exist, or it helps customers find other docs
            to understand the concept.</remark>
         <!-- 
         <para>For details about creating or managing &SERVICE; service-linked roles, see <xref
            linkend="using-service-linked-roles" endterm="using-service-linked-roles.title"/>.</para>
         -->
         <para>For details about creating or managing service-linked roles, see <ulink
               url="&url-iam-user;reference_aws-services-that-work-with-iam.html">&AWS; services
               that work with &IAM;</ulink>. Find a service in the table that includes a
               <code>Yes</code> in the <guilabel>Service-linked role</guilabel> column. Choose the
               <guilabel>Yes</guilabel> link to view the service-linked role documentation for that
            service.</para>
         <remark><emphasis role="bold">TODO</emphasis> - To add your service-linked role docs in the
            TOC, go to the end of this file and remove the comment from around the xi:include tag.</remark>
      </section>
   </section>
   <section id="security_iam_id-based-policy-examples" role="topic">
      <info>
         <title id="security_iam_id-based-policy-examples.title">Identity-based policy
            examples for &SERVICElong;</title>
         <titleabbrev>Identity-based policy examples</titleabbrev>
      </info>
      &sec-iam-template-policy-examples-intro;
      <para role="topiclist"/>
      <section id="security_iam_service-with-iam-policy-best-practices">
         <info>
            <title id="security_iam_service-with-iam-policy-best-practices.title">Policy best
               practices</title>
         </info>
         <remark><emphasis role="bold">NOTE:</emphasis> Do not edit these best practices</remark>
         &sec-iam-template-policy-best-practices; 
      </section>
      <section id="security_iam_id-based-policy-examples-console">
         <info>
            <title id="security_iam_id-based-policy-examples-console.title">Using the &SERVICE;
               console</title>
            <titleabbrev>Using the console</titleabbrev>
         </info>
         &sec-iam-template-id-based-policy-console;
         <remark><emphasis role="bold">RECOMMENDED:</emphasis> Replace this general info with a
            managed policy name and link or example policy with the necessary read-only permissions
            for accessing your console.</remark>
         <para>To ensure that users and roles can still use the &SERVICE; console, also attach the
            &SERVICE; <code><replaceable>ConsoleAccess</replaceable></code> or <code><replaceable>ReadOnly</replaceable></code> &AWS; managed policy to
            the entities. For more information, see <ulink
               url="&url-iam-user;id_users_change-permissions.html#users_change_permissions-add-console"
               >Adding permissions to a user</ulink> in the
            <emphasis>&guide-iam-user;</emphasis>.</para>
         <remark><emphasis role="bold">RECOMMENDED:</emphasis> Use a code entity for the
            real policy name. You can uncomment and edit the example below.</remark>
         <!-- 
         <code>AWSAwesomeConsoleAccess</code>
         -->
      </section>
      <section id="security_iam_id-based-policy-examples-view-own-permissions">
         <info>
            <title id="security_iam_id-based-policy-examples-view-own-permissions.title">Allow users
               to view their own permissions</title>
         </info>         
         &sec-iam-template-id-based-policy-examples-view-own-permissions; 
      </section>      
      <remark><emphasis role="bold">RECOMMENDED:</emphasis> Add 1-2 separate sections for least 
         privilege permissions. You can uncomment and edit the example below to get started.</remark>
      <!-- 
      <section id="security_iam_id-based-policy-examples-access-one-bucket">
         <info>
            <title id="security_iam_id-based-policy-examples-access-one-bucket.title">Accessing one
               &S3; bucket</title>
         </info>
         <remark><emphasis role="bold">EXAMPLE ONLY - Replace this with your own policy, including
               its section ID</emphasis></remark>
         <para>In this example, you want to grant an &IAM; user in your &AWS-account; access to one
            of your &S3; buckets, <code>examplebucket</code>. You also want to allow the user to
            add, update, and delete objects.</para>
         <para>In addition to granting the <code>s3:PutObject</code>, <code>s3:GetObject</code>, and
               <code>s3:DeleteObject</code> permissions to the user, the policy also grants the
               <code>s3:ListAllMyBuckets</code>, <code>s3:GetBucketLocation</code>, and
               <code>s3:ListBucket</code> permissions. These are the additional permissions required
            by the console. Also, the <code>s3:PutObjectAcl</code> and the
               <code>s3:GetObjectAcl</code> actions are required to be able to copy, cut, and paste
            objects in the console. For an example walkthrough that grants permissions to users and
            tests them using the console, see <ulink url="&url-s3-dev;walkthrough1.html">An example
               walkthrough: Using user policies to control access to your bucket</ulink>.</para>
         <programlisting>{
   "Version":"2012-10-17",
   "Statement":[
      {
         "Sid":"ListBucketsInConsole",
         "Effect":"Allow",
         "Action":[
            "s3:ListAllMyBuckets"
         ],
         "Resource":"&region-arn;s3:::*"
      },
      {
         "Sid":"ViewSpecificBucketInfo",
         "Effect":"Allow",
         "Action":[
            "s3:ListBucket",
            "s3:GetBucketLocation"
         ],
         "Resource":"&region-arn;s3:::examplebucket"
      },
      {
         "Sid":"ManageBucketContents",
         "Effect":"Allow",
         "Action":[
            "s3:PutObject",
            "s3:PutObjectAcl",
            "s3:GetObject",
            "s3:GetObjectAcl",
            "s3:DeleteObject"
         ],
         "Resource":"&region-arn;s3:::examplebucket/*"
      }
   ]
}</programlisting>
      </section>
      -->
      <remark><emphasis role="bold">GOLD STANDARD:</emphasis> Add additional sections for all primary 
         customer use cases, including tagging. You can uncomment and edit the example below to get started.</remark>
      <!-- GOLD STANDARD - Add additional sections for all primary customer use cases, including tagging.
         You can use the example below to get started.
      <section id="security_iam_id-based-policy-examples-view-widget-tags">
         <info>
            <title id="security_iam_id-based-policy-examples-view-widget-tags.title">Viewing
               &SERVICE; <replaceable>widgets</replaceable> based on tags</title>
         </info>
         <remark><emphasis role="bold">EXAMPLE ONLY</emphasis> - Replace this with your own policy.
            Don't forget to change the section ID.</remark>
         <para>You can use conditions in your identity-based policy to control access to &SERVICE;
            resources based on tags. This example shows how you might create a policy that allows
            viewing a <replaceable>widget</replaceable>. However, permission is granted only if the
               <replaceable>widget</replaceable> tag <code>Owner</code> has the value of that user's
            user name. This policy also grants the permissions necessary to complete this action on
            the console.</para>
         <programlisting>{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "ListWidgetsInConsole",
            "Effect": "Allow",
            "Action": "&SERVICEPREFIX;:ListWidgets",
            "Resource": "*"
        },
        {
            "Sid": "ViewWidgetIfOwner",
            "Effect": "Allow",
            "Action": "&SERVICEPREFIX;:GetWidget",
            "Resource": "&region-arn;&SERVICEPREFIX;:*:*:widget/*",
            "Condition": {
                "StringEquals": {"aws:ResourceTag/Owner": "${aws:username}"}
            }
        }
    ]
}</programlisting>
         <para>You can attach this policy to the &IAM; users in your account. If a user named
               <code>richard-roe</code> attempts to view an &SERVICE;
               <replaceable>widget</replaceable>, the <replaceable>widget</replaceable> must be
            tagged <code>Owner=richard-roe</code> or <code>owner=richard-roe</code>. Otherwise he is
            denied access. The condition tag key <code>Owner</code> matches both <code>Owner</code>
            and <code>owner</code> because condition key names are not case-sensitive. For more
            information, see <ulink url="&url-iam-user;reference_policies_elements_condition.html"
               >&IAM; JSON policy elements: Condition</ulink> in the <emphasis role="italic"
               >&guide-iam-user;</emphasis>.</para>
      </section>
      -->
   </section>
   <para><remark><emphasis role="bold">RECOMMENDED:</emphasis> If your service allows customers to create and 
      store resource-based policies in your service, then include this resource-based policy section. 
      You can uncomment and edit the example below to get started.</remark></para>
   <para><remark><emphasis role="bold">HINT:</emphasis> Resource-based policies (which can't be used
         in IAM) must include the "Principal" element. To view an example of a detailed
         resource-based policy page, see
         https://docs.aws.amazon.com/lambda/latest/dg/access-control-resource-based.html.</remark></para>      
   <para><remark><emphasis role="bold">GOLD STANDARD:</emphasis> If your service supports them, add examples for all common use cases.</remark></para>
   <!--       
   <section id="security_iam_resource-based-policy-examples" role="topic">
      <info>
         <title id="security_iam_resource-based-policy-examples.title">Resource-based
            policy examples for &SERVICElong;</title>
         <titleabbrev>Resource-based policy examples</titleabbrev>
      </info>
      <remark><emphasis role="bold">TO DO: </emphasis>This topic is fully customizable and you own
         the contents on this page. <emphasis role="bold">If your service does not
            support</emphasis> resource-based policies, <emphasis role="bold">COMMENT OUT</emphasis>
         this entire section. Then, if your service adds this feature in the future, it's easier to
         add the content..</remark>
      <para>To learn how to create a <replaceable>widget</replaceable>, see <replaceable><emphasis
               role="bold">ADD XREF TO YOUR DOCS HERE</emphasis></replaceable>.</para>
      <para role="topiclist"/>
      <section id="security_iam_resource-based-policy-examples-restrict-bucket-by-ip">
         <info>
            <title id="security_iam_id-based-policy-examples-restrict-bucket-by-ip.title"
               >Restricting &S3; bucket access to specific IP addresses</title>
         </info>
         <remark><emphasis role="bold">EXAMPLE ONLY</emphasis> - Replace this with your own policy.
            Don't forget to change the section ID.</remark>
         <para>The following example grants permissions to any user to perform any &S3; operations
            on objects in the specified bucket. However, the request must originate from the range
            of IP addresses specified in the condition.</para>
         <para>The condition in this statement identifies the 54.240.143.* range of allowed Internet
            Protocol version 4 (IPv4) IP addresses, with one exception: 54.240.143.188.</para>
         <para>The <code>Condition</code> block uses the <code>IpAddress</code> and
               <code>NotIpAddress</code> conditions and the <code>aws:SourceIp</code> condition key,
            which is an &AWS;-wide condition key. For more information about these condition keys,
            see <ulink url="&url-s3-dev;amazon-s3-policy-keys.html">Specifying conditions in a
               policy</ulink>. The<code>aws:sourceIp</code> IPv4 values use the standard CIDR
            notation. For more information, see <ulink
               url="&url-iam-user;reference_policies_elements_condition_operators.html#Conditions_IPAddress"
               >IP address condition operators</ulink> in the <emphasis role="italic"
               >&guide-iam-user;</emphasis>.</para>
         <programlisting>{
  "Version": "2012-10-17",
  "Id": "S3PolicyId1",
  "Statement": [
    {
      "Sid": "IPAllow",
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:*",
      "Resource": "&region-arn;s3:::examplebucket/*",
      "Condition": {
         "IpAddress": {"aws:SourceIp": "54.240.143.0/24"},
         "NotIpAddress": {"aws:SourceIp": "54.240.143.188/32"} 
      } 
    } 
  ]
}</programlisting>
      </section>
   </section>
   -->

   <section id="security_iam_troubleshoot" role="topic">
      <info>
         <title id="security_iam_troubleshoot.title">Troubleshooting &SERVICElong; identity and
            access</title>
         <titleabbrev>Troubleshooting</titleabbrev>
      </info>
      <remark><emphasis role="bold">RECOMMENDED:</emphasis> Add new troubleshooting sections when
         you learn about issues related to authentication and authorization that your customers are
         experiencing.</remark> &sec-iam-template-troubleshoot-intro; <para role="topiclist"/>
      <section id="security_iam_troubleshoot-no-permissions">
         <info>
            <title id="security_iam_troubleshoot-no-permissions.title">I am not authorized to
               perform an action in &SERVICE;</title>
         </info>
         <remark><emphasis role="bold">RECOMMENDED</emphasis>. Update the example with a resource
            from your own service. The "replaceable" tag indicates placeholder text that customer
            could substitute.</remark>
         <para>If the &console; tells you that you're not authorized to perform an action, then you
            must contact your administrator for assistance. Your administrator is the person that
            provided you with your user name and password.</para>
         <para>The following example error occurs when the <code>mateojackson</code> &IAM; user
            tries to use the console to view details about a fictional
                  <code><replaceable>my-example-widget</replaceable></code> resource but does not
            have the fictional <code>&SERVICEPREFIX;:<replaceable>GetWidget</replaceable></code>
            permissions.</para>
         <screen>User: &region-arn;iam::&account_id_example;:user/mateojackson is not authorized to perform: &SERVICEPREFIX;:<replaceable>GetWidget</replaceable> on resource: <replaceable>my-example-widget</replaceable></screen>
         <para>In this case, Mateo asks his administrator to update his policies to allow him to
            access the <code><replaceable>my-example-widget</replaceable></code> resource using the
                  <code>&SERVICEPREFIX;:<replaceable>GetWidget</replaceable></code> action.</para>
      </section>
      <section id="security_iam_troubleshoot-passrole">
         <info>
            <title id="security_iam_troubleshoot-passrole.title">I am not authorized to perform
               iam:PassRole</title>
         </info> &sec-iam-template-troubleshoot-passrole; </section>
      <section id="security_iam_troubleshoot-access-keys">
         <info>
            <title id="security_iam_troubleshoot-access-keys.title">I want to view my access
               keys</title>
         </info> &sec-iam-template-troubleshoot-access-keys; </section>
      <section id="security_iam_troubleshoot-admin-delegate">
         <info>
            <title id="security_iam_troubleshoot-admin-delegate.title">I'm an administrator and want
               to allow others to access &SERVICE;</title>
         </info> &sec-iam-template-troubleshoot-admin-delegate; </section>
      <section id="security_iam_troubleshoot-cross-account-access">
         <info>
            <title id="security_iam_troubleshoot-cross-account-access.title">I want to allow people
               outside of my &AWS-account; to access my &SERVICE; resources</title>
         </info> &sec-iam-template-troubleshoot-cross-account-access; </section>
   </section>
</section>
<!-- TODO: To add your SLR docs in the TOC, remove this text and the closing comment from around the <x:include> tag
  <xi:include href="using-service-linked-roles.xml"/>
  -->