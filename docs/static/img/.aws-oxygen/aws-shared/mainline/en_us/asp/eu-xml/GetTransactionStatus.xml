<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "file://zonbook/docbookx.dtd"
[
   <!ENTITY % phrases SYSTEM "file://AWSShared/common/phrases.ent">
   %phrases;
   <!ENTITY % sig2-migration SYSTEM "file://AWSShared/asp/eu-xml/fps-sig2-migration.ent">
   %sig2-migration;
   <!ENTITY % phrases-products SYSTEM "file://AWSShared/common/aws-prod-names-and-links.ent">
   %phrases-products;
   <!ENTITY % phrases-shared-fps SYSTEM "file://AWSShared/asp/eu-xml/phrases-shared-fps.ent">
   %phrases-shared-fps;
   <!ENTITY % phrases-shared SYSTEM "file://AWSShared/common/phrases-shared.ent">
   %phrases-shared;   
   <!ENTITY % xinclude SYSTEM "file://AWSShared/common/xinclude.mod">
   %xinclude;
]>
<section id="GetTransactionStatus" role="topic">
	<title id="GetTransactionStatus.title">GetTransactionStatus</title>
	<section>
		<title>Description</title>
		<para>The <function>GetTransactionStatus</function> action returns the status of the transaction specified by the <parameter>TransactionId</parameter>. <phrase condition="asp;fps-adv;fps-agg;fps-bas;fps-dig;fps-mkt">You could use this action if you choose not to process Instant Payment Notifications (IPNs) that you receive from Amazon Payments (for more information, see <xref endterm="APPNDX_IPN.title" linkend="APPNDX_IPN"/>)</phrase>.</para>
                <para condition="fps-api">This action appears in all &fps_product_short; Quick Starts as well as in the &asp_product; Advanced Guide.</para>
	</section>
	<section>
		<title>Request Parameters</title>
		<informaltable>
			<tgroup cols="3">
				<colspec colname="col1" colnum="1" colwidth="2*"/>
				<colspec colname="col2" colnum="2" colwidth="4*"/>
				<colspec colname="col3" colnum="3" colwidth="1*"/>
				<thead>
					<row>
						<entry>Parameter</entry>
						<entry>Definition</entry>
						<entry>Required</entry>
					</row>
				</thead>
				<tbody>
					<row>
						<entry>
							<simpara>
								<parameter>TransactionId</parameter>
							</simpara>
						</entry>
						<entry>
							<simpara>The transaction's ID.</simpara>
							<simpara>Type: String</simpara>
							<simpara>Constraint: Max size = 255 characters</simpara>
							<simpara>Default: None</simpara>
						</entry>
						<entry>
							<simpara>Yes</simpara>
						</entry>
					</row>
				</tbody>
			</tgroup>
		</informaltable>
		<para>For REST requests, you must also include parameters that are common to all requests.
			Parameter names are case sensitive.
			<!-- These parameters are included by default in SOAP requests. -->
			For more information, see <xref linkend="CommonRequestParameters" endterm="CommonRequestParameters.title"/>.
		</para>	
	</section>
	<section>
		<title>Response Elements</title>
		<informaltable frame="all">
			<tgroup cols="2">
				<colspec colname="c1" colnum="1" colwidth="1*"/>
				<colspec colname="c2" colnum="2" colwidth="3*"/>
				<thead>
					<row>
						<entry>Element</entry>
						<entry>Description</entry>
					</row>
				</thead>
				<tbody>
					<row>
						<entry>
							<simpara>
								<code>CallerReference</code>
							</simpara>
						</entry>
						<entry>
							<simpara>A value you provide that uniquely identifies the request. </simpara>
							<simpara>Type: String</simpara>
							<simpara>Size: 128 bytes</simpara>
						</entry>
					</row>
					<row>
						<entry>
							<simpara>
								<code>StatusCode</code>
							</simpara>
						</entry>
						<entry>
							<simpara>Shorthand code that specifies the status of the transaction. Expands on the information in the <parameter>TransactionStatus</parameter> field. For example, if <parameter>TransactionStatus</parameter> is PENDING, this field might be <parameter>PendingVerification</parameter>, or <parameter>PendingNetworkResponse</parameter>.</simpara>
							<simpara>Type: String</simpara>
							<simpara>Size: 64 bytes</simpara>
							<simpara>Valid Values: See <xref endterm="GetTransactionStatusCodes.title" linkend="GetTransactionStatusCodes"/></simpara>
						</entry>
					</row>
					<row>
						<entry>
							<simpara>
								<code>StatusMessage</code>
							</simpara>
						</entry>
						<entry>
							<simpara>A description of the transaction status.</simpara>
							<simpara>Type: String (LOB, Large Object)</simpara>
						</entry>
					</row>
					<row>
						<entry>
							<simpara>
								<code>TransactionId</code>
							</simpara>
						</entry>
						<entry>
							<para>&TransactionId;</para>
							<simpara>Type: String </simpara>
							<simpara>Size: 255 bytes</simpara>
						</entry>
					</row>
					<row>
						<entry>
							<simpara>
								<code>TransactionStatus</code>
							</simpara>
						</entry>
						<entry>
							<simpara>The status of the transaction. Provides a short code on the status of the transaction, for example "PENDING".</simpara>
							<simpara>Type: <link linkend="TransactionStatus">TransactionStatus</link></simpara>
							<simpara>Size: 20 bytes</simpara>
						</entry>
					</row>
				</tbody>
			</tgroup>
		</informaltable>
		<para>Responses also include elements common to all responses. For more information, see <xref endterm="CommonResponseElements.title" linkend="CommonResponseElements"/>.</para>
	</section>
	<section id="GetTransactionStatusCodes">
		<title id="GetTransactionStatusCodes.title">Status Codes</title>
		<para>This action can return the following values for <code>StatusCode</code>.</para>
		<informaltable frame="all">
			<tgroup cols="2">
				<colspec colname="c1" colnum="1" colwidth="1.5*"/>
				<colspec colname="c2" colnum="2" colwidth="3*"/>
				<thead>
					<row>
						<entry>Status Code</entry>
						<entry>Message</entry>
					</row>
				</thead>
				<tbody>
					<row>
						<entry>
							<simpara>
								<code>Canceled</code>
							</simpara>
						</entry>
						<entry>The transaction was explicitly canceled by the caller. </entry>
					</row>
					<row>
						<entry>
							<simpara>
								<code>Expired</code>
							</simpara>
						</entry>
						<entry>
							<para>This reserved amount on the payment instrument was not settled within the timeout period</para>
							<simpara>OR</simpara>
							<simpara>The transaction could not be completed within the specified timeout.</simpara>
						</entry>
					</row>
					<row>
						<entry>
							<simpara>
								<code>PendingNetworkResponse</code>
							</simpara>
						</entry>
						<entry>
							<para>This transaction is awaiting a response from the backend payment processor</para>
							<simpara>OR</simpara>
							<simpara>(Message returned by backend payment processor)</simpara>
						</entry>
					</row>
					<row>
						<entry>
							<simpara>
								<code>PendingVerification</code>
							</simpara>
						</entry>
						<entry>The transaction has been flagged for manual investigation </entry>
					</row>
					<row>
						<entry>
							<simpara>
								<code>Success</code>
							</simpara>
						</entry>
						<entry>
							<simpara>The requested amount was reserved successfully against the given payment instrument.</simpara>
							<simpara>OR</simpara>
							<simpara>The transaction was successful and the payment instrument was charged.</simpara>
						</entry>
					</row>
					<row>
						<entry>
							<simpara>
								<code>TransactionDenied</code>
							</simpara>
						</entry>
						<entry>
							<para>(Message returned by backend payment processor).</para>
							<simpara>OR</simpara>
							<simpara>The transaction was denied after investigation.</simpara>
						</entry>
					</row>
				</tbody>
			</tgroup>
		</informaltable>
	</section>
	<section id="GetTransactionStatusErrorCondition">
		<title id="GetTransactionErrorCondition.title">Errors</title>
		<para condition="ASYNC-ERRORS">This action can return both synchronous errors, which occur within the status for this action, and asynchronous errors that originate from the backend payment processor, which may occur apart from the status of the <function>GetTransactionStatus</function>.</para>
		<!-- section id="GetTransactionStatusErrorConditionSynchronous">
			<title id="GetTransactionStatusErrorConditionSynchronous.title">Synchronous Errors</title --><!-- hold for release -->
			<para>This action can return the following synchronous errors, which occur within the status for this action. </para>
			<informaltable frame="none">
				<tgroup cols="1">
					<colspec colname="c1" colnum="1" colwidth="3.69*"/>
					<tbody>
						<row>
							<entry>
								<itemizedlist>
									<listitem>
										<para>
											<link linkend="AccessFailure">AccessFailure</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="AuthFailure">AuthFailure</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="InternalError">InternalError</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="InvalidClientTokenId">InvalidClientTokenId</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="InvalidParams">InvalidParams</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="InvalidTransactionId">InvalidTransactionId</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="SignatureDoesNotMatch">SignatureDoesNotMatch</link>
										</para>
									</listitem>
								</itemizedlist>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
			<!-- note>
				<para>Error codes that are numeric (such as <code>1000</code>) are asynchronous errors from the backend payment processor, which may occur apart from the status of the <function>GetTransactionStatus</function>. See <link linkend="GetTransactionStatusErrorConditionAsynchronous" endterm="GetTransactionStatusErrorConditionAsynchronous.title"/></para>
			</note -->
		<!-- /section -->
		<section id="GetTransactionStatusErrorConditionAsynchronous" condition="ASYNC-ERRORS">
			<title id="GetTransactionStatusErrorConditionAsynchronous.title">Asynchronous Errors</title>
			<para>Asynchronous errors are contained in the REST response within the <code>GetTransactionStatusResponse/Transaction/ErrorMessage</code> node, and can occur even if the value for the <code>GetTransactionStatusResponse/Transaction/Status</code> node is <code>SUCCESS</code>. For more information, see the error code entry for the specific error.</para>
			<informaltable frame="none">
				<tgroup cols="5">
					<colspec colname="c1" colnum="1" colwidth="1.0*"/>
					<colspec colname="c2" colnum="2" colwidth="1.0*"/>
					<colspec colname="c3" colnum="3" colwidth="1.0*"/>
					<colspec colname="c4" colnum="4" colwidth="1.0*"/>
					<colspec colname="c5" colnum="5" colwidth="1.0*"/>
					<tbody>
						<row>
							<entry>
								<itemizedlist>
									<listitem>
										<para>
											<link linkend="async-error-1000">1000</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-1001">1001</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-1002">1002</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-1500">1500</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-1501">1501</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-1502">1502</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-1503">1503</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-2000">2000</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-2001">2001</link>
										</para>
									</listitem>
								</itemizedlist>
							</entry>
							<entry>
								<itemizedlist>
									<listitem>
										<para>
											<link linkend="async-error-2500">2500</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-2501">2501</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3000">3000</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3001">3001</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3002">3002</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3003">3003</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3004">3004</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3005">3005</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3006">3006</link>
										</para>
									</listitem>
								</itemizedlist>
							</entry>
							<entry>
								<itemizedlist>
									<listitem>
										<para>
											<link linkend="async-error-3007">3007</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3008">3008</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3009">3009</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3010">3010</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3500">3500</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3501">3501</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3502">3502</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3503">3503</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3504">3504</link>
										</para>
									</listitem>
								</itemizedlist>
							</entry>
							<entry>
								<itemizedlist>
									<listitem>
										<para>
											<link linkend="async-error-3505">3505</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3506">3506</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3507">3507</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3508">3508</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3509">3509</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3510">3510</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3511">3511</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3512">3512</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3513">3513</link>
										</para>
									</listitem>
								</itemizedlist>
							</entry>
							<entry>
								<itemizedlist>
									<listitem>
										<para>
											<link linkend="async-error-3514">3514</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3515">3515</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3800">3800</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-3801">3801</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-4000">4000</link>
										</para>
									</listitem>
									<listitem>
										<para>
											<link linkend="async-error-4001">4001</link>
										</para>
									</listitem>
								</itemizedlist>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
			<note>
				<para><phrase>Error codes that are alphabeticas (such as <code>InvalidParams</code>) are synchronous errors, which occur as part of the <function>GetTransactionStatus</function> response. See <link linkend="GetTransactionStatusErrorConditionSynchronous" endterm="GetTransactionStatusErrorConditionSynchronous.title"/></phrase></para>
			</note>
		</section>
	</section>
	<section>
		<title>Examples</title>
		<para>The following sections show a sample request and response.</para>
		<section>
			<title>Sample REST Request</title>
			<programlisting width="79"><xi:include parse="text" href="file://AWSShared/asp/snippets/rest/GetTransactionStatusRestRequestExample.xml"/></programlisting>
		</section>
	    <section condition="fps">
			<title>Sample Query Request</title>
			<programlisting width="79"><xi:include parse="text" href="file://AWSShared/asp/snippets/query/GetTransactionStatusQueryExample.xml"/></programlisting>
		</section>
		<section  revisionflag="html;htmlcond" condition="fps">
	        <title>Sample Soap Request</title>
	        <programlisting width="79"><xi:include parse="text" href="file://AWSShared/asp/snippets/soap/GetTransactionStatusSoapRequestExample.xml"/></programlisting>
	    </section>
	    <section>
			<title>Sample Response to REST Request</title>
			<programlisting width="79"><xi:include parse="text" href="file://AWSShared/asp/snippets/rest/GetTransactionStatusRestResponseExample.xml"/></programlisting>
		</section>
		<section revisionflag="html;htmlcond" condition="fps">
			<title>Sample Response to SOAP Request</title>
			<programlisting width="79"><xi:include parse="text" href="file://AWSShared/asp/snippets/soap/GetTransactionStatusSoapResponseExample.xml"/></programlisting>
		</section>
		<!-- section NO IPN SAMPLE AVAILABLE>
		</section -->
	</section>
</section>
