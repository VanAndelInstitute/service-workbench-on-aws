suspend fun createEBEnvironment( envName: String?, appName: String?): String {

        val setting1 = ConfigurationOptionSetting {
            namespace = "aws:autoscaling:launchconfiguration"
            optionName = "IamInstanceProfile"
            value = "aws-elasticbeanstalk-ec2-role"
        }

        val applicationRequest = CreateEnvironmentRequest {
            description = "An AWS Elastic Beanstalk environment created using the AWS SDK for Kotlin"
            environmentName = envName
            solutionStackName = "64bit Amazon Linux 2 v3.2.12 running Corretto 11"
            applicationName = appName
            optionSettings = listOf(setting1)
        }

        var envArn: String
        ElasticBeanstalkClient { region = "us-east-1" }.use { beanstalkClient ->
            val applicationResponse = beanstalkClient.createEnvironment(applicationRequest)
            envArn = applicationResponse.environmentArn.toString()
        }
        return envArn
}
