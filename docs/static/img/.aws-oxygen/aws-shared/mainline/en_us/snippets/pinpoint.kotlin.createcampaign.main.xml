<programlisting>
suspend fun createPinCampaign(appId: String, segmentIdVal: String) {

            val scheduleOb = Schedule {
                startTime = "IMMEDIATE"
            }

            val defaultMessageOb = Message {
                action = Action.OpenApp
                body = "My message body"
                title = "My message title"
            }

            val messageConfigurationOb = MessageConfiguration {
                defaultMessage = defaultMessageOb
            }

            val writeCampaign = WriteCampaignRequest {
                description = "My description"
                schedule = scheduleOb
                name = "MyCampaign"
                segmentId = segmentIdVal
                messageConfiguration= messageConfigurationOb
            }

            PinpointClient { region = "us-west-2" }.use { pinpoint ->
             val result: CreateCampaignResponse = pinpoint.createCampaign(CreateCampaignRequest {
                 applicationId = appId
                 writeCampaignRequest = writeCampaign
             })
             println("Campaign ID is ${result.campaignResponse?.id}")
        }
 }
</programlisting>