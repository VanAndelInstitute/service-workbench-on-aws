    public static String createEBEnvironment(ElasticBeanstalkClient beanstalkClient, String envName, String appName) {

        try {

            ConfigurationOptionSetting setting1 = ConfigurationOptionSetting.builder()
                    .namespace("aws:autoscaling:launchconfiguration")
                    .optionName("IamInstanceProfile")
                    .value("aws-elasticbeanstalk-ec2-role")
                    .build();

            CreateEnvironmentRequest applicationRequest = CreateEnvironmentRequest.builder()
                    .description("An AWS Elastic Beanstalk environment created using the AWS Java API")
                    .environmentName(envName)
                    .solutionStackName("64bit Amazon Linux 2 v3.2.12 running Corretto 11")
                    .applicationName(appName)
                    .optionSettings(setting1)
                    .build();

            CreateEnvironmentResponse response = beanstalkClient.createEnvironment(applicationRequest);
            return response.environmentArn();

        } catch (ElasticBeanstalkException e) {
            System.err.println(e.getMessage());
            System.exit(1);
        }

        return "";
    }
