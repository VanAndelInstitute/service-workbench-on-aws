// Load the required clients and packages
const {
  CognitoIdentityClient,
  GetIdCommand
} = require("@aws-sdk/client-cognito-identity");
const {
  fromCognitoIdentityPool,
} = require("@aws-sdk/credential-provider-cognito-identity");

// Set the parameter
const IDENTITY_POOL_ID = "IDENTITY_POOL_ID";
const ACCOUNT_ID = "ACCOUNT_ID";

// Initialize the Amazon Cognito credentials provider
const cognitoidentity = new CognitoIdentityClient({
  region: "REGION",
  credentials: fromCognitoIdentityPool({
    client: new CognitoIdentityClient({ region: "REGION" }),
    identityPoolId: IDENTITY_POOL_ID
  }),
});

const getIdParams = {
  IdentityPoolId: IDENTITY_POOL_ID,
  AccountId: ACCOUNT_ID
};

const showId = async () => {
  try {
    const data = await cognitoidentity.send(new GetIdCommand(getIdParams));
    const results = "Cognito Identity ID is " + data.IdentityId;
    document.getElementById("results").innerHTML = results;
  } catch (err) {
    const errorResults = "Error" + err;
    document.getElementById("results").innerHTML = results;
  }
};

// Make function available to browser
window.showId = showId;

