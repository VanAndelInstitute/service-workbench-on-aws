<programlisting>
    public void strictAuthenticatedEncryption_KmsManagedKey() throws NoSuchAlgorithmException {
        AmazonS3Encryption s3Encryption = AmazonS3EncryptionClientBuilder
                .standard()
                .withRegion(Regions.US_WEST_2)
                .withCryptoConfiguration(new CryptoConfiguration(CryptoMode.StrictAuthenticatedEncryption).withAwsKmsRegion(Region.getRegion(Regions.US_WEST_2)))
                // Can either be Key ID or alias (prefixed with 'alias/')
                .withEncryptionMaterials(new KMSEncryptionMaterialsProvider("alias/s3-kms-key"))
                .build();

        AmazonS3 s3NonEncrypt = AmazonS3ClientBuilder.standard().withRegion(Regions.DEFAULT_REGION).build();

        s3Encryption.putObject(BUCKET_NAME, ENCRYPTED_KEY, "some contents");
        s3NonEncrypt.putObject(BUCKET_NAME, NON_ENCRYPTED_KEY, "some other contents");
        try {
            s3Encryption.getObjectAsString(BUCKET_NAME, NON_ENCRYPTED_KEY);
        } catch (SecurityException e) {
            // Strict authenticated encryption will throw an exception if an object is not encrypted with AES/GCM
            System.err.println(NON_ENCRYPTED_KEY + " was not encrypted with AES/GCM");
        }

    }
</programlisting>